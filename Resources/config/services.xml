<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <!-- global conf -->
        <parameter key="lyrixx.lifestream.stream.max_items">10</parameter>
        <parameter key="lyrixx.lifestream.cache.maxage">3600</parameter>

        <!-- Service class -->
        <parameter key="lyrixx.lifestream.service.twitter.class">Lyrixx\Lifestream\Service\Twitter</parameter>
        <parameter key="lyrixx.lifestream.service.twitter_search.class">Lyrixx\Lifestream\Service\TwitterSearch</parameter>
        <parameter key="lyrixx.lifestream.service.twitter_list.class">Lyrixx\Lifestream\Service\TwitterList</parameter>
        <parameter key="lyrixx.lifestream.service.github.class">Lyrixx\Lifestream\Service\Github</parameter>
        <parameter key="lyrixx.lifestream.service.rss20.class">Lyrixx\Lifestream\Service\Rss20</parameter>
        <parameter key="lyrixx.lifestream.service.atom.class">Lyrixx\Lifestream\Service\Atom</parameter>
    </parameters>

    <services>
        <!--  Client -->
        <service id="lyrixx.lifestream.client" class="Guzzle\Http\Client" public="false" />

        <!-- Factory -->
        <service id="lyrixx.lifestream.factory" class="Lyrixx\Lifestream\LifestreamFactory">
            <argument type="service" id="lyrixx.lifestream.client" />
        </service>

        <!-- Lifestream -->
        <service id="lyrixx.lifestream.lifestream" class="Lyrixx\Lifestream\Lifestream" abstract="true">
            <argument /> <!-- Service  -->
        </service>

        <!-- Service -->
        <service id="lyrixx.lifestream.service.twitter" class="%lyrixx.lifestream.service.twitter.class%" abstract="true" public="false">
            <argument /><!-- username -->
            <argument type="service" id="lyrixx.lifestream.client" />
        </service>
        <service id="lyrixx.lifestream.service.twitter_search" class="%lyrixx.lifestream.service.twitter_search.class%" abstract="true" public="false">
            <argument /><!-- search -->
            <argument type="service" id="lyrixx.lifestream.client" />
        </service>
        <service id="lyrixx.lifestream.service.twitter_list" class="%lyrixx.lifestream.service.twitter_list.class%" abstract="true" public="false">
            <argument /><!-- username -->
            <argument /><!-- list -->
            <argument type="service" id="lyrixx.lifestream.client" />
        </service>
        <service id="lyrixx.lifestream.service.github" class="%lyrixx.lifestream.service.github.class%" abstract="true" public="false">
            <argument /><!-- username -->
            <argument type="service" id="lyrixx.lifestream.client" />
        </service>
        <service id="lyrixx.lifestream.service.rss20" class="%lyrixx.lifestream.service.rss20.class%" abstract="true" public="false">
            <argument /><!-- username -->
            <argument type="service" id="lyrixx.lifestream.client" />
        </service>
        <service id="lyrixx.lifestream.service.atom" class="%lyrixx.lifestream.service.atom.class%" abstract="true" public="false">
            <argument /><!-- username -->
            <argument type="service" id="lyrixx.lifestream.client" />
        </service>
    </services>
</container>
